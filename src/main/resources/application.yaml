spring:
  application:
    name: Restaurant_Service
  datasource:
    username: ${SPRING_DATASOURCE_USERNAME}
    password: ${SPRING_DATASOURCE_PASSWORD}
    url: ${SPRING_DATASOURCE_URL}
    hikari:
      maximum-pool-size: 20
      minimum-idle: 5
      idle-timeout: 30000  # Таймаут для простоящих соединений (мс)
      connection-timeout: 20000 # Таймаут для подключения (мс)
      max-lifetime: 1800000 # Максимальное время жизни соединения (мс)
  jpa:
    show-sql: ${SPRING_JPA_SHOW_SQL}
    properties:
      hibernate:
        connection:
          release_mode: after_transaction
        show_sql: ${SPRING_JPA_PROPERTIES_HIBERNATE_SHOW_SQL}
        jdbc:
          batch_size: 20
          batch_versioned_data: true
        order_updates: true
        generate_statistics: true
        format_sql: true


  rabbitmq:
    host: localhost
    port: 5672
    username: guest
    password: guest
  flyway:
    enabled: ${SPRING_FLYWAY_ENABLED}
    locations: ${SPRING_FLYWAY_LOCATIONS}
    baseline-on-migrate: ${SPRING_FLYWAY_BASELINE_ON_MIGRATE}
    schemas: ${SPRING_FLYWAY_SCHEMAS}
    clean-disabled: false
  servlet:
    multipart:
      max-file-size: 10MB
      max-request-size: 10MB
      enabled: true

rabbitmq:
  queues:
    json:
      queue:
        name: restaurant_json
        routingKey: restaurant_routing_key_secret
  exchanges:
    exchange:
      name: java_exchange


server:
  port: ${SERVER_PORT}

jwt:
  access: ${JWT_ACCESS}

#logging:
#  level:
##     Логирование WebSocket
#    org.springframework.web.socket: DEBUG
#    org.springframework.messaging: DEBUG
#    org.springframework.web.socket.messaging: DEBUG
#    # Логирование ошибок Tomcat (если используется встроенный Tomcat)
#    org.springframework.boot.web.embedded.tomcat: DEBUG

bot:
  name:
    ${BOT_NAME}
  key:
    ${BOT_KEY}

cron:
  scheduler: 0 * * * * *

management:
  endpoints:
    web:
      exposure:
        include: health,prometheus

  metrics:
    export:
      prometheus:
        enabled: true
    distribution:
      percentiles-histogram:
        "[http.server.requests]": true